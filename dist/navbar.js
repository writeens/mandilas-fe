!function(e){var t={};function o(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([,function(e,t){let o=!1,a="";const n=document.querySelectorAll(".cart-container"),s=document.querySelector("#navbarToggler"),l=document.querySelector(".pre-auth"),r=document.querySelector(".post-auth"),i=document.querySelector(".menu"),c=(document.querySelector(".main-ac-right-content"),document.querySelector("#navbarFirstName")),d=document.querySelector("#navbarLastName"),u=document.querySelector("#navbarEmail"),m=document.querySelector("#navbarPassword"),y=document.querySelector("#navbarPhoneNumber"),h=document.querySelector("#registerFromRegisterModal"),p=document.querySelector("#loginFromLoginModal"),v=document.querySelector("#navLogInEmail"),f=document.querySelector("#navLogInPassword"),g=document.querySelector("#login"),L=document.querySelector("#register"),S=document.querySelector("#loginModal"),T=document.querySelector("#registerModal"),w=document.querySelector("#registerFromLoginModal"),b=document.querySelector("#loginFromRegisterModal"),k=document.querySelector("#closeLogin"),q=document.querySelector("#closeRegister"),E=document.querySelector("#logout"),I=document.querySelector(".pre-auth"),M=document.querySelector(".post-auth"),x=document.querySelector("#loader"),H=document.querySelector("#infoToast"),N=document.querySelector("#infoText"),A=document.querySelectorAll("[data-nav-key]");A.forEach((e,t,o)=>{e.addEventListener("click",()=>((e,t,o)=>{"true"===e.getAttribute("data-nav-key")&&(o.forEach((e,o)=>{t!==o&&e.children[2].classList.remove("show-tooltip-desktop")}),e.children[2].classList.toggle("show-tooltip-desktop"))})(e,t,o))}),s.addEventListener("click",()=>{s.children[0].classList.contains("fa-bars")?(s.children[0].classList.remove("fa-bars"),s.children[0].classList.add("fa-close")):(s.children[0].classList.remove("fa-close"),s.children[0].classList.add("fa-bars")),i.classList.toggle("menu-show"),l&&l.classList.toggle("auth-show"),r&&r.classList.toggle("auth-show")}),g.addEventListener("click",()=>{S.style.display="flex"}),L.addEventListener("click",()=>{T.style.display="flex"}),w.addEventListener("click",()=>{j(),S.style.display="none",T.style.display="flex"}),b.addEventListener("click",()=>{F(),T.style.display="none",S.style.display="flex"}),k.addEventListener("click",()=>{j(),S.style.display="none"}),q.addEventListener("click",()=>{F(),T.style.display="none"});let P="";(()=>{let e=window.location.origin;P="http://127.0.0.1:5500"===e?"development":"production",console.log(P)})();new Intl.NumberFormat("en-US",{style:"currency",currency:"NGN",maximumFractionDigits:6,minimumFractionDigits:0});null===localStorage.getItem("mandilasToken")&&localStorage.setItem("mandilasToken",JSON.stringify(""));const O=e=>{const t=document.querySelectorAll(".cart-container > .no-of-items");null!==e?fetch(`https://peaceful-river-39598.herokuapp.com/api/v1/mandilas/cart/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{let{status:o,data:a,message:n,code:s}=e;"success"===o&&t.forEach(e=>e.innerHTML=a.length),"error"===o&&t.forEach(e=>e.innerHTML=0)}).catch(e=>{"error"===status&&t.forEach(e=>e.innerHTML=0)}):t.forEach(e=>e.innerHTML=0)},j=()=>{v.value="",f.value=""},F=()=>{c.value="",d.value="",u.value="",y.value="",m.value=""},_=e=>{e.classList.add("shake"),e.classList.add("invalid-input"),setTimeout(()=>{e.classList.remove("shake"),e.classList.remove("invalid-input")},500)},z=e=>"navbarFirstName"===e.id||"navbarLastName"===e.id?!0===(e=>{let t=e.trim();return!(!RegExp("^[a-z|A-Z]*$").test(t)||""===t)})(e.value)||_(e):"navbarEmail"===e.id||"navLogInEmail"===e.id?!0===(e=>{let t=e.trim();return!(!RegExp("^[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?.)+(?:[a-zA-Z]{2}|aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel)$").test(t)||""===t)})(e.value)||_(e):"navbarPassword"===e.id||"navLogInPassword"===e.id?""!==e.value&&e.value.length>6||_(e):"navbarPhoneNumber"===e.id?!0===(e=>{let t=e.trim();return!(!/^(0|\+234)\d{10}$/.test(t)||""===t)})(e.value)||_(e):void 0;h.addEventListener("click",()=>{if(z(c),z(d),z(u),z(m),z(y),z(c)&&z(d)&&z(u)&&z(m)&&z(y)){x.classList.add("showLoader");const e={firstName:c.value,lastName:d.value,email:u.value,password:m.value,phoneNumber:y.value},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("https://peaceful-river-39598.herokuapp.com/api/v1/mandilas/auth/sign-up",t).then(e=>e.json()).then(t=>{if(x.classList.remove("showLoader"),"success"===t.status){const{name:n,email:s,token:l,userId:r}=t.data;localStorage.setItem("mandilasToken",`${l}`),N.innerHTML=`Hi ${e.firstName}, You have successfully registered`,M.children[0].innerHTML=`Hello, ${e.firstName}`,T.style.display="none",S.style.display="none",M.style.display="flex",I.style.display="none",F(),o=!0,a=r,O(a),$.ajax({url:"/sendWelcomeMail",type:"POST",data:{email:s,name:n},success:function(){console.log("Email sent")}})}"error"===t.status&&"MAIL_EXISTS"===t.code&&(N.innerHTML=`Hi ${e.firstName}, this email already exists`),H.classList.add("showInfoToast"),setTimeout(()=>{H.classList.remove("showInfoToast")},2e3)}).catch(e=>{console.log(e)})}});p.addEventListener("click",()=>{if(z(v),z(f),z(v)&&z(f)){x.classList.add("showLoader");const e={email:v.value,password:f.value},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("https://peaceful-river-39598.herokuapp.com/api/v1/mandilas/auth/sign-in",t).then(e=>e.json()).then(e=>{if(console.log(e.status),x.classList.remove("showLoader"),"success"===e.status){const{displayName:t,email:n,customToken:s,userId:l}=e.data;let r=`${t}`.split(" ")[1];N.innerHTML=`Hi ${r}, You have successfully signed in.`,M.children[0].innerHTML=`Hello, ${r}`,localStorage.setItem("mandilasToken",`${s}`),S.style.display="none",v.value="",f.value="",o=!0,a=l,M.style.display="flex",I.style.display="none",O(a)}"error"===e.status&&"INVALID PASSWORD"===e.code&&(N.innerHTML="The password you entered is incorrect."),"error"===e.status&&"INVALID EMAIL"===e.code&&(N.innerHTML="The email you entered does not exist. Try signing up.",T.style.display="flex"),H.classList.add("showInfoToast"),setTimeout(()=>{H.classList.remove("showInfoToast")},3e3)}).catch(e=>{console.log(e)})}});const C=new Promise((e,t)=>{M.style.display="none",I.style.display="flex";let n=localStorage.getItem("mandilasToken");"undefined"!==n&&""!==n&&firebase.auth().signInWithCustomToken(n).then(t=>{a=t.user.uid;let n=`${t.user.displayName}`.split(" ")[0];M.children[0].innerHTML=`Hello, ${n}`,o=!0,M.style.display="flex",I.style.display="none","/Homepage/index.html"===window.location.pathname&&(N.innerHTML=`Hi, ${n}, you are logged in`,H.classList.add("showInfoToast"),setTimeout(()=>{H.classList.remove("showInfoToast")},2e3)),O(a),e(a)}).catch(t=>{O(null);var o=t.code;t.message;"auth/invalid-custom-token"===o&&x.classList.remove("showLoader"),"auth/network-request-failed"===o&&(x.classList.remove("showLoader"),N.innerHTML="Check your network",H.classList.add("showInfoToast"),setTimeout(()=>{H.classList.remove("showInfoToast")},3e3)),e(null)})});window.addEventListener("load",C);E.addEventListener("click",()=>{x.classList.add("showLoader"),firebase.auth().signOut().then(e=>{console.log("userIsSignedOut"),localStorage.removeItem("mandilasToken"),M.style.display="none",I.style.display="flex",x.classList.remove("showLoader"),o=!1,a="",window.location.reload()}).catch(e=>{})}),document.querySelector(".navbar-logo").addEventListener("click",()=>{window.location.pathname.split("/").includes("Homepage")?window.location.href="index.html":window.location.href="../Homepage/index.html"}),n.forEach(e=>{e.addEventListener("click",()=>{window.location.href="../Cart/index.html"})}),document.querySelector("#nameContainer").addEventListener("click",()=>{C.then(e=>{""!==e&&null!=e&&(window.location.href="../Account Profile/index.html")}).catch(e=>{N.innerHTML="Kindly make sure you are logged in and try again",H.classList.add("showInfoToast"),setTimeout(()=>{H.classList.remove("showInfoToast")},2e3)})})}]);